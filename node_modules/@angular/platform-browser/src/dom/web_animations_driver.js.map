{"version":3,"sources":["../../../../../modules/@angular/platform-browser/src/dom/web_animations_driver.ts"],"names":[],"mappings":"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","file":"web_animations_driver.js","sourceRoot":"","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {AnimationPlayer} from '@angular/core';\nimport {isPresent} from '../facade/lang';\nimport {AnimationKeyframe, AnimationStyles} from '../private_import_core';\n\nimport {AnimationDriver} from './animation_driver';\nimport {WebAnimationsPlayer} from './web_animations_player';\nexport class WebAnimationsDriver implements AnimationDriver {\n/**\n * @param {?} element\n * @param {?} startingStyles\n * @param {?} keyframes\n * @param {?} duration\n * @param {?} delay\n * @param {?} easing\n * @param {?=} previousPlayers\n * @return {?}\n */\nanimate(\n      element: any, startingStyles: AnimationStyles, keyframes: AnimationKeyframe[],\n      duration: number, delay: number, easing: string,\n      previousPlayers: AnimationPlayer[] = []): WebAnimationsPlayer {\n    let /** @type {?} */ formattedSteps: {[key: string]: string | number}[] = [];\n    let /** @type {?} */ startingStyleLookup: {[key: string]: string | number} = {};\n    if (isPresent(startingStyles)) {\n      startingStyleLookup = _populateStyles(startingStyles, {});\n    }\n\n    keyframes.forEach((keyframe: AnimationKeyframe) => {\n      const /** @type {?} */ data = _populateStyles(keyframe.styles, startingStyleLookup);\n      data['offset'] = Math.max(0, Math.min(1, keyframe.offset));\n      formattedSteps.push(data);\n    });\n\n    // Styling passed into element.animate() must always be balanced.\n    // The special cases below can occur if only style() calls exist\n    // within an animation or when a style() calls are used prior\n    // to a group() animation being issued or if the renderer is\n    // invoked by the user directly.\n    if (formattedSteps.length == 0) {\n      formattedSteps = [startingStyleLookup, startingStyleLookup];\n    } else if (formattedSteps.length == 1) {\n      const /** @type {?} */ start = startingStyleLookup;\n      const /** @type {?} */ end = formattedSteps[0];\n      end['offset'] = null;\n      formattedSteps = [start, end];\n    }\n\n    const /** @type {?} */ playerOptions: {[key: string]: string | number} = {\n      'duration': duration,\n      'delay': delay,\n      'fill': 'both'  // we use `both` because it allows for styling at 0% to work with `delay`\n    };\n\n    // we check for this to avoid having a null|undefined value be present\n    // for the easing (which results in an error for certain browsers #9752)\n    if (easing) {\n      playerOptions['easing'] = easing;\n    }\n\n    // there may be a chance a NoOp player is returned depending\n    // on when the previous animation was cancelled\n    previousPlayers = previousPlayers.filter(filterWebAnimationPlayerFn);\n    return new WebAnimationsPlayer(\n        element, formattedSteps, playerOptions, /** @type {?} */(( <WebAnimationsPlayer[]>previousPlayers)));\n  }\n}\n/**\n * @param {?} styles\n * @param {?} defaultStyles\n * @return {?}\n */\nfunction _populateStyles(styles: AnimationStyles, defaultStyles: {[key: string]: string | number}):\n    {[key: string]: string | number} {\n  const /** @type {?} */ data: {[key: string]: string | number} = {};\n  styles.styles.forEach(\n      (entry) => { Object.keys(entry).forEach(prop => { data[prop] = entry[prop]; }); });\n  Object.keys(defaultStyles).forEach(prop => {\n    if (!isPresent(data[prop])) {\n      data[prop] = defaultStyles[prop];\n    }\n  });\n  return data;\n}\n/**\n * @param {?} player\n * @return {?}\n */\nfunction filterWebAnimationPlayerFn(player: AnimationPlayer) {\n  return player instanceof WebAnimationsPlayer;\n}\n"]}